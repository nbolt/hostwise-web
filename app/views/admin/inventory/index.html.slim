- par_week     = @distro.select {|date, centers| date >= Date.today && date <= Date.today + 1.week}
- par_tomorrow = par_week.select {|date, centers| date == Date.tomorrow}

- total_par    = @distro.reduce(0) {|acc, centers| acc + centers[1].reduce(0) {|acc, jobs| acc + king_bed_count(jobs[1]) + twin_bed_count(jobs[1])} }
- par_week     = par_week.reduce(0) {|acc, centers| acc + centers[1].reduce(0) {|acc, jobs| acc + king_bed_count(jobs[1]) + twin_bed_count(jobs[1])} }
- par_tomorrow = par_tomorrow.reduce(0) {|acc, centers| acc + centers[1].reduce(0) {|acc, jobs| acc + king_bed_count(jobs[1]) + twin_bed_count(jobs[1])} }

.xenon.custom ng:controller='admin_inventory'
  .row.top
    .col-sm-4
      .panel.panel-default
        .panel-heading Total Par
        .panel-body
          p.text-medium Total par ordered to date
          .super-large.text-secondary= total_par
    .col-sm-4
      .panel.panel-default
        .panel-heading Par Needed Tomorrow
        .panel-body
          p.text-medium Par needed for tomorrow
          .super-large.text-secondary= par_tomorrow
    .col-sm-4
      .panel.panel-default
        .panel-heading Par Needed This Week
        .panel-body
          p.text-medium Par needed for the next seven days
          .super-large.text-secondary= par_week
  .panel.panel-default
    .panel-heading
      h3.panel-title Inventory
      .btn.btn-gray.btn-icon style='margin-right: 25px' ng:click='export_csv()'
          i.icon-details
          span Export CSV
      .panel-options
        a data-toggle="panel" href="#"
          span.collapse-icon &ndash;
          span.expand-icon +
        a data-toggle="remove" href="#"
          | \&times;
    .panel-body.table-responsive
      table#example-1.table.table-striped.table-bordered cellspacing="0" width="100%"
        thead
          tr
            th Date
            th Location
            th Clean King Packs Picked Up
            th Clean Twin Packs Picked Up
            th Clean Pool Towels Picked Up
            th Clean Bed Covers Picked Up
            th Toiletry Packs Picked Up
            th Dirty King Sheets Dropped Off
            th Dirty Twin Sheets Dropped Off
            th Dirty Beach Towels Dropped Off
            th Dirty Bed Covers Dropped Off
        thead.search
          tr
            th.date Date
            th Location
            th
            th
            th
            th
            th
            th
            th
            th
            th
        tfoot
          tr
            th Date
            th Location
            th Clean King Packs Picked Up
            th Clean Twin Packs Picked Up
            th Clean Pool Towels Picked Up
            th Clean Bed Covers Picked Up
            th Toiletry Packs Picked Up
            th Dirty King Sheets Dropped Off
            th Dirty Twin Sheets Dropped Off
            th Dirty Beach Towels Dropped Off
            th Dirty Bed Covers Dropped Off
        tbody
          - @distro.each do |date, centers|
            - centers.each do |id, jobs|
              tr
                td
                  = date
                td
                  = DistributionCenter.find(id).name
                td
                  = king_bed_count(jobs)
                td
                  = twin_bed_count(jobs)
                td 
                  | not currently available
                td
                  = bed_count(jobs)
                td
                  = toiletries(jobs)
                td
                  = dirty_king_sheets(jobs)
                td
                  = dirty_twin_sheets(jobs)
                td
                  | not currently available
                td
                  = dirty_sheets(jobs)